<span class="pull-right" ng-show="group.isMember(user) && !group.isAdmin(user)">
    <button ng-click="leave(currentMember)" class="btn btn-danger">
        {{ '%BUTTON_LEAVE%' | phrase }}
    </button>
</span>

<p class="pull-right" ng-show="user && !group.isMember(user)">
    <button ng-click="join(user)" class="btn btn-success">
        {{ '%BUTTON_JOIN%' | phrase }}
    </button>
</p>

<div class="p">
    <div class="pull-left imagedrop" upload-url="group.thumbnailPath()">
        <img class="thumbnail" ng-show="group.image" ng-src="{{ group.image.data }}"/>
        <span class="thumbnail message" ng-show="!group.image && group.isAdmin(user)">Drop image here.</span>
    </div>

    <h2>
        {{group.name}}
        <small ng-show="group.startDate">{{ '%WEEKDAY_' + group.weekday() + '%' | phrase }} at
            {{group.time()}} (<span am-time-ago="group.startDate"></span>)
        </small>
    </h2>
    <p ng-bind-html-unsafe="group.description"></p>

    <div class="clearfix"></div>
</div>

<div class="row">
    <div class="col-lg-9 col-md-8 col-sm-8">
        <h3>Members</h3>

        <p><span class="badge">{{ group.statusCount('Yes') }}</span> yes, <span class="badge">{{ group.statusCount('Maybe') }}</span>
            maybe and <span class="badge">{{ group.statusCount('No') }}</span> no out of <span
                    class="badge">{{ group.members.length }}</span>
            total.</p>
        <table class="table table-striped">
            <tbody>
            <tr ng-repeat="member in group.members">
                <td>
                    <img ng-src="{{ member.user.thumbnailSrc() }}" width="25" height="25"/>
                    {{ member.user.displayName() }}
                </td>
                <td>
                    <span ng-show="member.status == 'Yes'"
                          class="label label-success">{{ '%LABEL_YES%' | phrase }}</span>
                    <span ng-show="member.status == 'Maybe'"
                          class="label label-warning">{{ '%LABEL_MAYBE%' | phrase }}</span>
                    <span ng-show="member.status == 'No'" class="label label-danger">{{ '%LABEL_NO%' | phrase }}</span>
                </td>
                <td>
                    <a title="Remove member" class="text-danger" href="#"
                       ng-show="group.isAdmin(user) && user.id != member.user.id"
                       ng-click="removeMember(member)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
        <h3>Comments</h3>


        <div class="panel panel-default">
            <table class="table">
                <tr ng-show="!group.isMember(user)"><td colspan="2">Join meetup to add a comment...</td></tr>
                <tr ng-show="group.isMember(user)">
                    <td width="30"><img ng-src="{{ user.thumbnailSrc() }}" width="25" height="25"/>
                    </td>
                    <td>
                        <form novalidate class="form" role="form" name="commentForm"

                              ng-submit="addComment()">

                            <input required ng-model="commentModel.text" name="comment"
                                   placeholder="Write a comment..." class="form-control"/>
                        </form>
                    </td>
                </tr>

                <tr ng-show="group.public || group.isMember(user)"
                    ng-repeat="comment in group.comments |  orderBy:'createdAt':true | limitTo:commentHelper.visible">
                    <td width="30"><img ng-src="{{ user.thumbnailSrc() }}" width="25" height="25"/>
                    </td>
                    <td>
                        <small>{{ comment.author }} <span am-time-ago="comment.createdAt"></span></small>
                        <a title="Delete comment" class="text-danger" href="#" ng-show="comment.isOwner(user)" ng-click="deleteComment(comment)">
                            Delete
                        </a>
                        <p ng-bind-html="comment.text | emoji"></p>
                    </td>

                </tr>


            </table>
            <div ng-show="commentHelper.more()>0" class="panel-footer"><a href="#"
                                                                          ng-click="commentHelper.showMore()">View
                {{commentHelper.more()}} more comments...</a></div>
        </div>


    </div>
    <div class="col-lg-3 col-md-4 col-sm-4">
        <div ng-show="group.upcoming()">
            <div ng-show="group.isMember(user)">
                <h3>Are you going?</h3>

                <div class="btn-group btn-group-justified">
                    <a ng-click="yes()" class="btn btn-default"
                       ng-class="{'btn-success':currentMember.status == 'Yes'}">
                        {{ '%BUTTON_YES%' | phrase }}
                    </a>
                    <a ng-click="maybe()" class="btn btn-default"
                       ng-class="{'btn-warning':currentMember.status == 'Maybe'}">
                        {{ '%BUTTON_MAYBE%' | phrase }}
                    </a>
                    <a ng-click="no()" class="btn btn-default"
                       ng-class="{'btn-danger':currentMember.status == 'No'}">
                        {{ '%BUTTON_NO%' | phrase }}
                    </a>
                </div>
            </div>

            <form class="form" role="form" name="joinForm" novalidate ng-show="!user" ng-submit="join()">
                <h3>Join meetup</h3>

                <div class="form-group">
                    <input class="form-control" ng-model="joinModel.email"
                           placeholder="Enter your email"
                           required type="text">

                </div>
            </form>

            <form class="form" novalidate name="inviteForm" role="form"
                  ng-show="group.isAdmin(user) || group.public && group.isMember(user)"
                  ng-submit="invite()">
                <h3>Invite friends</h3>

                <div class="form-group">
                    <input required type="email" class="form-control" ng-model="inviteModel.email"
                           placeholder="Enter email to invite" type="text">
                </div>
            </form>

            <form novalidate class="form" role="form" name="groupForm" ng-submit="update()" ng-show="group.isAdmin(user)">
                <h3>Edit group</h3>

                <div class="form-group">
                    <label class="control-label" for="groupFormName">Name</label>
                    <input required class="form-control" id="groupFormName" type="text"
                           ng-model="groupModel.name" name="name" placeholder=""/>
                </div>
                <div class="form-group">
                    <label class="control-label" for="groupFormDescription">Description</label>
                    <textarea rows="5" cols="50" class="form-control" id="groupFormDescription" type="text"
                           ng-model="groupModel.description" name="description" placeholder=""/>
                </div>
                <div class="form-group">
                    <label class="control-label" for="groupFormWeekday">Weekday</label>
                    <select id="groupFormWeekday" class="form-control"
                            ng-model="groupModel.weekday" name="weekday" >
                        <option value="1">{{ '%WEEKDAY_1%' | phrase }}</option>
                        <option value="2">{{ '%WEEKDAY_2%' | phrase }}</option>
                        <option value="3">{{ '%WEEKDAY_3%' | phrase }}</option>
                        <option value="4">{{ '%WEEKDAY_4%' | phrase }}</option>
                        <option value="5">{{ '%WEEKDAY_5%' | phrase }}</option>
                        <option value="6">{{ '%WEEKDAY_6%' | phrase }}</option>
                        <option value="0">{{ '%WEEKDAY_0%' | phrase }}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label" for="groupFormTime">Time</label>
                    <input class="form-control" id="groupFormTime" type="time"
                           ng-model="groupModel.time" name="time"  placeholder=""/>
                </div>
                <div class="form-group">
                    <label class="control-label" for="groupFormPublic">Public</label>
                    <input class="form-control" id="groupFormPublic" type="checkbox"
                           ng-model="groupModel.public" name="public" />
                </div>
                <button type="submit" class="btn btn-success">{{'%BUTTON_UPDATE%' | phrase}}</button>
            </form>

            <div>
                <h3>Reminder</h3>
                <p>Send reminder to all members that hasn't answered yes or no yet.</p>
                <a href="#" ng-click="remind()" class="btn btn-info">{{'%BUTTON_SEND%' | phrase}}</a>
            </div>
        </div>

        <div>
            <h3>Next week</h3>
            <p>Update meetup to next week</p>
            <a href="#" ng-click="increment()" class="btn btn-info">{{'%BUTTON_NEXT%' | phrase}}</a>
        </div>

    </div>
</div>


<a class="btn btn-info" href="/groups">
    <span class="glyphicon glyphicon-chevron-left"></span>
    {{'%BACK_TO_GROUPS%' | phrase}}
</a>



